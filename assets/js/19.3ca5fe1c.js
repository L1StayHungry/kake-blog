(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{440:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"js模块化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js模块化"}},[t._v("#")]),t._v(" JS模块化")]),t._v(" "),s("p",[t._v("发展")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("无模块化")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("文件分离，基础模块化的第一步")]),t._v(" "),s("ul",[s("li",[t._v("会污染全局作用域，不利于大型项目的开发及团队维护")])])]),t._v(" "),s("li",[s("p",[t._v("模块化雏形-IIFE语法侧的优化")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("作用域")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("函数块作用域")])]),t._v(" "),s("li",[s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iifeModule "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("increase")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reset")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\niifeModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niifeModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])])])])])]),t._v(" "),s("li",[s("p",[t._v("传统模块化")]),t._v(" "),s("ul",[s("li",[t._v("CommonJS")]),t._v(" "),s("li",[t._v("AMD & CMD & UMD")]),t._v(" "),s("li",[t._v("ES6(ESM)")])])]),t._v(" "),s("li",[s("p",[t._v("现代型模块化")])]),t._v(" "),s("li",[s("p",[t._v("模块化与工程化")])]),t._v(" "),s("li",[s("p",[t._v("模块化与组件化")])]),t._v(" "),s("li",[s("p",[t._v("模块化与设计模式")])])]),t._v(" "),s("p",[t._v("AMD、CommonJs、ESM")]),t._v(" "),s("h2",{attrs:{id:"commonjs-cjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-cjs"}},[t._v("#")]),t._v(" CommonJs(CJS)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("由nodejs支持")])]),t._v(" "),s("li",[s("p",[t._v("如何划分模块")]),t._v(" "),s("ul",[s("li",[t._v("以【文件】划分模块")])])]),t._v(" "),s("li",[s("p",[t._v("同步的")]),t._v(" "),s("ul",[s("li",[t._v("阻塞")])])]),t._v(" "),s("li",[s("p",[t._v("使用")]),t._v(" "),s("ul",[s("li",[t._v("通过module + exports 去对外暴露接口")]),t._v(" "),s("li",[t._v("通过require来调用其他模块")])])]),t._v(" "),s("li",[s("p",[t._v("实现")]),t._v(" "),s("ul",[s("li",[t._v("模块加载器：解析文件地址\n"),s("ul",[s("li",[t._v("require\n"),s("ul",[s("li",[t._v("返回一个对象，包含了解析之后的内容")])])])])]),t._v(" "),s("li",[t._v("模块解析器：执行文件内容，node里面是用v8执行的\n"),s("ul",[s("li",[t._v("运行一下，把结果缓存，避免多次require时重复解析")])])])])]),t._v(" "),s("li",[s("p",[t._v("新的问题 —— 异步依赖（主要针对了服务端的解决方案。对于异步拉取依赖的处理整合不是那么的友好。）")])])]),t._v(" "),s("h2",{attrs:{id:"amd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[t._v("#")]),t._v(" AMD")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("异步加载+允许制定回调函数")])]),t._v(" "),s("li",[s("p",[t._v("定义")]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  define('amdModule', ['dependencyModule1', 'dependencyModule2'], (dependencyModule1, dependencyModule2) => {\n    // 业务逻辑\n    // 处理部分\n    let count = 0;\n    const increase = () => ++count;\n    const reset = () => {\n      count = 0;\n    }\n\n    return {\n      increase, reset\n    }\n  })\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("引入")]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  require(['amdModule'], amdModule => {\n    amdModule.increase();\n  })\n")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"umd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#umd"}},[t._v("#")]),t._v(" UMD")]),t._v(" "),s("ul",[s("li",[t._v("兼容AMD&CMD")]),t._v(" "),s("li",[t._v("适合在浏览器中加载异步模块，可以并行加载多个模块")]),t._v(" "),s("li",[t._v("会有引入成本，不能按需加载")])]),t._v(" "),s("h2",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),s("h2",{attrs:{id:"esm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#esm"}},[t._v("#")]),t._v(" ESM")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("由底层实现")])]),t._v(" "),s("li",[s("p",[t._v("nodejs")]),t._v(" "),s("ul",[s("li",[t._v("现在已经支持ESM")])])]),t._v(" "),s("li",[s("p",[t._v("新增定义：\n引入关键字 —— import\n导出关键字 —— export")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  // 引入区域\n  import dependencyModule1 from './dependencyModule1.js';\n  import dependencyModule2 from './dependencyModule2.js';\n\n  // 实现代码逻辑\n  let count = 0;\n  export const increase = () => ++count;\n  export const reset = () => {\n    count = 0;\n  }\n\n  // 导出区域\n  export default {\n    increase, reset\n  }\n  \n  \n  ****************或者这样引入*************************\n   <script type=\"module\" src=\"esModule.js\"><\/script>\n")])])]),s("ul",[s("li",[s("p",[t._v("动态模块")])]),t._v(" "),s("li",[s("p",[t._v("es11原生解决方案")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  import('./esModule.js').then(dynamicEsModule => {\n    dynamicEsModule.increase();\n  })\n \n  // 优点（重要性）：通过一种最统一的形态整合了js的模块化\n  // 缺点（局限性）：本质上还是运行时的依赖分析\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"前端工程化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端工程化"}},[t._v("#")]),t._v(" 前端工程化")]),t._v(" "),s("ul",[s("li",[t._v("线下执行")]),t._v(" "),s("li",[t._v("方案\n"),s("ul",[s("li",[t._v("grunt")]),t._v(" "),s("li",[t._v("gulp")]),t._v(" "),s("li",[t._v("webpack")])])]),t._v(" "),s("li",[t._v("优点\n"),s("ul",[s("li",[t._v("构建时生成配置，运行时执行")]),t._v(" "),s("li",[t._v("最终转化成执行处理依赖")]),t._v(" "),s("li",[t._v("可以拓展")])])])]),t._v(" "),s("p",[t._v("完全体 webpack为核心的工程化 + mvvm框架组件化 + 设计模式")])])}),[],!1,null,null,null);s.default=e.exports}}]);